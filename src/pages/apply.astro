---
import MainLayout from '../layouts/MainLayout.astro';
import SEO from '../components/SEO.astro';
import { PLATFORMS } from '../data/platforms';
import { withBase } from '../utils/links';

const canonicalPath = '/apply';
const searchParams = Astro.url.searchParams;
const src = searchParams.get('src') ?? '';
const camp = searchParams.get('camp') ?? '';
const date = searchParams.get('date') ?? '';
const success = searchParams.get('success') === '1';
const formAction = withBase('/claim/index.php');
---

<MainLayout
  title="Apply | NaughtyCamSpot"
  description="Apply for automated promotion and ops support for cam models."
>
  <SEO
    slot="head"
    title="Apply | NaughtyCamSpot"
    description="Apply for automated promotion and ops support for cam models."
    path={canonicalPath}
  />

  <section class="content-card space-y-6">
    <div class="space-y-3">
      <p class="hero-tagline">Apply to NCS</p>
      <h1 class="font-display text-4xl text-white sm:text-5xl">
        Get matched to the right promo stack.
      </h1>
      <p class="max-w-2xl text-base text-white/70">
        Tell us how to reach you and which platforms you want to grow. We will follow up with a launch plan, platform
        checklist, and next steps for automation.
      </p>
    </div>

    {success && (
      <div class="rounded-2xl border border-rose-gold/40 bg-rose-gold/10 px-5 py-4 text-sm text-white/80">
        Application received. The concierge team will follow up shortly.
      </div>
    )}

    <form class="grid gap-6 sm:grid-cols-2" method="post" action={formAction}>
      <input type="hidden" name="lead_form" value="1" />
      <input type="hidden" name="src" value={src} />
      <input type="hidden" name="camp" value={camp} />
      <input type="hidden" name="date" value={date} />

      <label class="flex flex-col gap-2 text-sm text-white/70">
        Email
        <input
          class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white"
          type="email"
          name="email"
          placeholder="you@domain.com"
          autocomplete="email"
        />
      </label>

      <label class="flex flex-col gap-2 text-sm text-white/70">
        Telegram
        <input
          class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white"
          type="text"
          name="telegram"
          placeholder="@yourhandle"
          autocomplete="off"
        />
      </label>

      <label class="flex flex-col gap-2 text-sm text-white/70 sm:col-span-2">
        WhatsApp
        <input
          class="rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-white"
          type="text"
          name="whatsapp"
          placeholder="+1 555 000 0000"
          autocomplete="tel"
        />
      </label>

      <div class="space-y-3 sm:col-span-2">
        <p class="text-xs uppercase tracking-[0.35em] text-rose-petal/70">Platforms you want to grow</p>
        <div class="grid gap-3 sm:grid-cols-2">
          {PLATFORMS.map((platform) => (
            <label class="flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white/70">
              <input
                class="h-4 w-4 accent-rose-gold"
                type="checkbox"
                name="platforms[]"
                value={platform.slug}
              />
              <span class="text-white">{platform.name}</span>
              <span class="ml-auto text-[0.65rem] uppercase tracking-[0.25em] text-white/45">
                {platform.statusLabel}
              </span>
            </label>
          ))}
        </div>
      </div>

      <label class="flex items-start gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-4 text-xs uppercase tracking-[0.28em] text-white/70 sm:col-span-2">
        <input class="mt-1 h-4 w-4 accent-rose-gold" type="checkbox" name="consent" required />
        I agree to receive onboarding messages from NaughtyCamSpot.
      </label>

      <div class="flex flex-col gap-3 sm:col-span-2 sm:flex-row sm:items-center">
        <button
          class="inline-flex items-center justify-center rounded-full border border-rose-gold/70 bg-rose-gold px-6 py-3 text-sm uppercase tracking-[0.3em] text-midnight shadow-glow transition hover:-translate-y-1"
          type="submit"
        >
          Submit application
        </button>
        <p class="text-xs uppercase tracking-[0.3em] text-white/45">
          No passwords. No exclusivity. You keep your accounts.
        </p>
      </div>
    </form>
  </section>
</MainLayout>
