---
import LinkCTA from '../components/LinkCTA.astro';
import MainLayout from '../layouts/MainLayout.astro';
import { PRIMARY_CTA } from '../data/copy';
import { buildTrackedLink, withBase } from '../utils/links';

const HERO_CTA_PLACEHOLDER = 'https://linktr.ee/naughtycamspot';
const joinSlot = 'join_page';
const joinCamp = 'join';

const joinHref = buildTrackedLink({
  path: '/go/model-join.php',
  slot: joinSlot,
  camp: joinCamp,
  placeholder: HERO_CTA_PLACEHOLDER
});

const resolveHostname = (value: string | undefined) => {
  if (!value) {
    return '';
  }

  try {
    return new URL(value).hostname;
  } catch {
    return String(value).replace(/^https?:\/\//, '').split('/')[0];
  }
};

const siteHostname = resolveHostname(import.meta.env.SITE ?? '');
const isPagesBuild = import.meta.env.IS_PAGES === 'true';
const shouldTrackClicks = siteHostname === 'naughtycamspot.com' && !isPagesBuild;
const joinHrefPages = PRIMARY_CTA.pagesHref;
const ctaTarget = shouldTrackClicks ? '_blank' : undefined;
const ctaRel = shouldTrackClicks ? 'noreferrer' : undefined;

const howItWorks = [
  {
    title: 'Click join',
    detail:
      'Tap the join button to open our affiliate rotator. Pick a paid cam program and complete their sign-up flow using our link.'
  },
  {
    title: 'Send proof',
    detail:
      'Email a screenshot or your referral code to concierge@naughtycamspot.com so we can confirm the referral credit.'
  },
  {
    title: 'Receive the StartRight kit',
    detail:
      'We immediately send the 14-day StartRight kit: lighting checklist, scripted opener, tip menu, pricing ladders, schedule, and ToS cheatsheet.'
  },
  {
    title: 'Optional Q&A',
    detail:
      'Need clarification? Reply to the StartRight kit email for asynchronous guidance—no hands-on promotion, just answers.'
  }
];

const starterKitItems = [
  'Lighting checklist for webcams and phones',
  'Opening show script with icebreakers',
  'Tip menu with upsell ladders',
  '14-day launch schedule with daily prompts',
  'Pricing ladders for tokens, tributes, and bundles',
  'Terms of service cheatsheet with quick references'
];

const whatWereNot = [
  'Not an agency, manager, or representative',
  'No paid promotions or social boosts promised',
  'We never take a cut—affiliate links fund the StartRight kit',
  'You own every account and can leave whenever you like'
];

const faq = [
  {
    question: 'Who owns the accounts?',
    answer:
      'You do. Every platform profile stays under your control. We only provide StartRight resources after you sign up with our links.'
  },
  {
    question: 'Do you guarantee earnings?',
    answer:
      'No. Results depend on your effort, platform policies, and audience. The StartRight kit is a guide—not a promise of income.'
  },
  {
    question: 'Is this employment or an agency contract?',
    answer:
      'No. There is no employment, representation, or agency relationship. We run an affiliate-funded resource hub.'
  },
  {
    question: 'What happens after the StartRight kit?',
    answer:
      'You can email follow-up questions, share your first payout, and, if you like, provide a one-line testimonial so other models know what to expect.'
  }
];
---

<MainLayout
  title="Join | NaughtyCamSpot"
  description="Sign up through NaughtyCamSpot affiliate links to unlock the free 14-day StartRight kit."
>
  <section class="hero-shell parallax-veil">
    <div class="pointer-events-none absolute inset-0 bg-gradient-to-b from-white/10 via-transparent to-black/60"></div>
    <div class="relative space-y-6">
      <span class="hero-tagline">StartRight referral hub</span>
      <h1 class="font-display text-5xl leading-tight text-white sm:text-6xl">Start camming, keep control, claim your kit</h1>
      <p class="max-w-2xl text-base text-white/70">
        NaughtyCamSpot is a referral + StartRight hub. Click join, finish the partner program signup with our links, send proof,
        and we email the full 14-day StartRight kit—no promo promises, no management fees.
      </p>
      <LinkCTA
        class="inline-flex w-fit items-center justify-center border border-rose-gold/60 bg-rose-gold px-6 py-3 text-xs font-semibold uppercase tracking-[0.3em] text-midnight shadow-glow transition hover:-translate-y-1"
        href_pages={joinHrefPages}
        href_prod={joinHref}
        target={ctaTarget}
        rel={ctaRel}
        data-track={shouldTrackClicks ? 'click' : undefined}
        data-slot={shouldTrackClicks ? joinSlot : undefined}
        data-camp={shouldTrackClicks ? joinCamp : undefined}
      >
        Start camming • Free StartRight kit
      </LinkCTA>
    </div>
  </section>

  <section class="content-card space-y-6">
    <h2 class="section-heading">How it works</h2>
    <p class="text-sm text-white/70">
      Four simple steps keep the process transparent. The full breakdown lives in our
      <a class="text-rose-gold underline-offset-4 hover:underline" href={withBase('/starter-kit')}>
        StartRight kit overview
      </a>
      so you always know what’s included.
    </p>
    <ol class="grid gap-4 text-sm text-white/70 sm:grid-cols-2">
      {howItWorks.map((step, index) => (
        <li class="rounded-2xl border border-white/10 bg-white/5 px-5 py-4 backdrop-blur-xl">
          <span class="text-xs uppercase tracking-[0.3em] text-rose-petal/70">Step {index + 1}</span>
          <p class="mt-2 font-semibold text-white">{step.title}</p>
          <p class="mt-1 text-white/70">{step.detail}</p>
        </li>
      ))}
    </ol>
  </section>

  <section class="content-card space-y-6">
    <h2 class="section-heading">What you get</h2>
    <p class="text-sm text-white/70">
      Everything arrives in one email bundle immediately after we verify your referral. Download, duplicate, and adapt every
      worksheet for your own brand.
    </p>
    <ul class="grid gap-4 text-sm text-white/70 sm:grid-cols-2">
      {starterKitItems.map((item) => (
        <li class="rounded-2xl border border-white/10 bg-white/5 px-5 py-4 backdrop-blur-xl">{item}</li>
      ))}
    </ul>
  </section>

  <section class="content-card space-y-6">
    <h2 class="section-heading">What we’re not</h2>
    <p class="text-sm text-white/70">
      Clarity first. We only provide tools, templates, and email support. There is no management or promotion component.
    </p>
    <ul class="grid gap-4 text-sm text-white/70">
      {whatWereNot.map((item) => (
        <li class="rounded-2xl border border-white/10 bg-white/5 px-5 py-4 backdrop-blur-xl">{item}</li>
      ))}
    </ul>
  </section>

  <section class="content-card space-y-6">
    <h2 class="section-heading">FAQ</h2>
    <dl class="grid gap-4 text-sm text-white/70">
      {faq.map((item) => (
        <div class="rounded-2xl border border-white/10 bg-white/5 px-5 py-4 backdrop-blur-xl">
          <dt class="text-xs uppercase tracking-[0.3em] text-rose-petal/70">{item.question}</dt>
          <dd class="mt-2 text-white/70">{item.answer}</dd>
        </div>
      ))}
    </dl>
  </section>

  <section class="content-card space-y-4 text-xs uppercase tracking-[0.3em] text-white/55">
    <p>No employment or agency relationship.</p>
    <p>No guarantee of earnings.</p>
    <p>Accounts remain yours; you can leave anytime.</p>
    <p>Affiliate links fund the StartRight kit.</p>
  </section>
</MainLayout>
