---
import LinkCTA from '../components/LinkCTA.astro';
import Notices from '../components/Notices.astro';
import MainLayout from '../layouts/MainLayout.astro';
import { PRIMARY_CTA } from '../data/copy';
import contests from '../data/contests.json';

const formatDateStamp = () => {
  const now = new Date();
  const year = String(now.getUTCFullYear());
  const month = String(now.getUTCMonth() + 1).padStart(2, '0');
  const day = String(now.getUTCDate()).padStart(2, '0');
  return `${year}${month}${day}`;
};

const dateStamp = formatDateStamp();
const joinHrefProd = `/go/model-join.php?src=contests_banner&camp=contests&date=${dateStamp}`;
---

<MainLayout title="Platform contests" description="Track active contests and promos from NaughtyCamSpot partner platforms.">
  <section class="space-y-8">
    <Notices />
    <div class="space-y-4">
      <h1 class="font-display text-4xl text-white sm:text-5xl">Platform contests and promos</h1>
      <p class="max-w-3xl text-base text-white/70">
        We monitor flagship contests so you can plan show themes and traffic pushes around them. Check back for updates as each network releases new challenges.
      </p>
    </div>
    <div class="grid gap-8 lg:grid-cols-[1fr_320px]">
      <div class="space-y-4">
        {contests.map((contest) => (
          <article class="rounded-[28px] border border-white/10 bg-white/5 p-6 backdrop-blur-2xl">
            <header class="space-y-1">
              <h2 class="font-display text-2xl text-white">{contest.platform}</h2>
              <p class="text-sm text-white/60">{contest.title}</p>
            </header>
            <footer class="mt-4 flex flex-wrap items-center justify-between gap-3 text-xs uppercase tracking-[0.3em] text-white/50">
              <a href={contest.url} target="_blank" rel="nofollow noopener" class="text-rose-gold transition hover:text-white">
                View details â†—
              </a>
              <span>Ends: {contest.ends}</span>
            </footer>
          </article>
        ))}
      </div>
      <aside class="space-y-4 rounded-[28px] border border-white/10 bg-white/5 p-6 backdrop-blur-2xl">
        <h2 class="font-display text-xl text-white">Join with our links</h2>
        <p class="text-sm text-white/65">
          Use the guarded join path so we can verify your account and unlock the StartRight kit once you send proof.
        </p>
        <LinkCTA
          class="border border-rose-gold/60 bg-rose-gold text-midnight"
          label="Start enrollment"
          pagesHref="/startright"
          prodHref={joinHrefProd}
        />
        <LinkCTA
          class="border border-white/20 bg-transparent text-white hover:bg-white/10"
          pagesHref={PRIMARY_CTA.pagesHref}
          prodHref={PRIMARY_CTA.prodHref}
          label={PRIMARY_CTA.label}
        />
      </aside>
    </div>
  </section>
</MainLayout>
