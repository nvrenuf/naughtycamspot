---
import { withBase } from '../../utils/links';

const steps = [
  {
    title: 'Pick a platform',
    description: 'Pick a platform. Use simple notes to choose.',
    revealLabel: 'What happens next',
    nextBullets: ['Compare payout style.', 'Check your time zone fit.', 'Pick one to start.'],
    link: { href: '/earnings', label: 'See earnings' }
  },
  {
    title: 'Sign up with our link',
    description: 'This helps us confirm your VIP unlock.',
    revealLabel: 'Why this matters',
    nextBullets: ['Your signup is tracked safely.', 'We can verify your slot fast.', 'You keep account control.']
  },
  {
    title: 'Send proof â†’ unlock VIP',
    description: 'Send quick proof to unlock VIP help.',
    revealLabel: 'After you send proof',
    nextBullets: ['We review your screenshot.', 'We send your next setup steps.', 'You get the StartRight checklist.'],
    link: { href: '/startright', label: 'Start quick setup' }
  }
];

const spacing = 'py-16';
const gridCols = 'md:grid-cols-3';
const cardPadding = 'p-6';
const titleCopy = 'Three steps. Mobile-first.';
---
<section class={`px-6 ${spacing}`}>
  <div class="mx-auto max-w-6xl">
    <div class="flex flex-col gap-5 text-center">
      <p class="mx-auto text-[clamp(0.75rem,1.2vw,0.9rem)] uppercase tracking-[0.4em] text-rose-petal/70">
        How it works
      </p>
      <h2 class="font-display text-[clamp(2.1rem,5vw,3rem)] text-white">{titleCopy}</h2>
    </div>
    <div class={`mt-10 grid gap-5 sm:gap-6 ${gridCols}`}>
      {steps.map((step, index) => (
        <article class={`flex h-full flex-col gap-4 rounded-3xl border border-white/10 bg-white/5 ${cardPadding}`}>
          <span class="inline-flex h-11 w-11 items-center justify-center rounded-full border border-white/20 bg-white/10 text-[clamp(0.95rem,1.8vw,1.1rem)] font-semibold text-rose-gold">
            {(index + 1).toString().padStart(2, '0')}
          </span>
          <h3 class="font-display text-[clamp(1.4rem,3.2vw,1.9rem)] text-white">{step.title}</h3>
          <p class="text-[clamp(0.95rem,1.7vw,1.1rem)] leading-relaxed text-white/75">{step.description}</p>
          <details class="rounded-2xl border border-white/10 bg-black/20 p-3">
            <summary class="cursor-pointer text-xs font-semibold uppercase tracking-[0.22em] text-rose-petal focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-gold">
              {step.revealLabel}
            </summary>
            <ul class="mt-3 space-y-1 text-sm text-white/75">
              {step.nextBullets.map((item) => (
                <li>{item}</li>
              ))}
            </ul>
          </details>
          {step.link && (
            <a
              class="mt-auto inline-flex text-[clamp(0.78rem,1.4vw,0.9rem)] uppercase tracking-[0.35em] text-rose-gold transition hover:text-white"
              href={withBase(step.link.href)}
            >
              {step.link.label}
            </a>
          )}
        </article>
      ))}
    </div>
  </div>
</section>
